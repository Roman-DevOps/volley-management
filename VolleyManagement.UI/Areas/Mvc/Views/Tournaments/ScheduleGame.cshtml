@model VolleyManagement.UI.Areas.Mvc.ViewModels.GameResults.GameViewModel

@{
    ViewBag.Title = @Resources.TournamentViews.ScheduleGameTitle;
    Layout = "~/Areas/Mvc/Views/Shared/_MenuLayout.cshtml";
}

<h2>@ViewBag.Title</h2>

@if (Model == null)
{
    @Html.ValidationMessage("LoadError")
}
else
{
    using (Html.BeginForm())
    {
        <legend>@Resources.TournamentViews.ScheduleGameLegend</legend>
        
        @Html.ValidationMessage("ValidationError")
        @Html.HiddenFor(model => model.TournamentId)
        <div class="editor-label">
            @Html.LabelFor(model => model.Round)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Round, Model.Rounds, new { @class = "form-control" })
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.HomeTeamId)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.HomeTeamId, Model.Teams, new { @class = "form-control" })
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.AwayTeamId)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.AwayTeamId, Model.TeamsWithFreeDay, new { @class = "form-control" })
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.GameDate)
        </div>
        <div class="form-group editor-field">
            @Html.EditorFor(model => model.GameDate, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.GameDate, "", new { @class = "text-danger" })
        </div>

        @Html.Hidden("redirectToSchedule");
        <div class="row">
            <div class="col-md-1">
                <input id="create" class="btn btn-default" type="submit" value="@Resources.TournamentViews.Create" />
            </div>
            <div class="col-md-2">
                <input id="createOneMore" class="btn btn-default" type="submit" value="@Resources.TournamentViews.CreateOneMore" />
            </div>
        </div>
    }
    
    @Html.ActionLink(@Resources.TournamentViews.Cancel, "ShowSchedule", new { tournamentId = Model.TournamentId }, new { @class = "form-control" })
}

<br/>
<script type="text/javascript">
    $(document).ready(function () {
        $('#create').click(OnCreateClick);
        $('#createOneMore').click(OnCreateOneMoreClick);
    });
    function OnCreateClick() {        
        $('#redirectToSchedule').val(true);
    }
    function OnCreateOneMoreClick() {
        $('#redirectToSchedule').val(false);
    }
</script>